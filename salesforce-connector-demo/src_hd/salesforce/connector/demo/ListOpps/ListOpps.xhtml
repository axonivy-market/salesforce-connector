<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition template="/layouts/basic-10.xhtml">
		<ui:define name="title">List Opportunities</ui:define>
		<ui:define name="content">
			<h:form id="form">
				<p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true" />
				<div class="ui-fluid">
					<div class="ui-g">
						<div class="ui-g-12 ui-md-12 ui-lg-12">
					        <div class="card">
					            <p:barChart model="#{data.bean.barModel}" style="width: 100%; height: 400px;"/>
					        </div>
					    </div>
					</div>
				</div>
				<div class="command-btns">
					<p:commandButton id="add" 
						value="Add New" update="form" icon="si si-add" />
				</div>
				<div class="ui-fluid">
					<div class="ui-g">
						<div class="ui-g-12 ui-md-12 ui-lg-12">
							<p:dataTable id="oppDataTable" widgetVar="oppDataTable"
								value="#{data.bean.opps}" var="opp" rowKey="#{opp.id}"
								rows="10" paginator="true" 
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="({currentPage} of {totalPages})"
								rowsPerPageTemplate="5,10,20" paginatorPosition="bottom"
								emptyMessage="No records found">

								<p:column
									headerText="#{ivy.cms.co('/Dialogs/listOpps/oppName')}"
									width="120px;" sortBy="#{opp.oppName}"
									filterBy="#{opp.oppName}" filterMatchMode="contains">
									<p:commandLink value="#{opp.oppName}" actionListener="#{data.bean.openOpportunityDetail(opp.id)}" oncomplete="PF('opportunityDetailDialog').show()" update="opportunityDetail"/>
								</p:column>
								<p:column
									headerText="#{ivy.cms.co('/Dialogs/listOpps/accName')}"
									width="100px;" sortBy="#{opp.accName}"
									filterBy="#{opp.accName}" filterMatchMode="contains">
									<h:outputText value="#{opp.accName}" />
								</p:column>
								<p:column
									headerText="#{ivy.cms.co('/Dialogs/listOpps/amount')}"
									width="100px;" sortBy="#{opp.amount}"
									filterBy="#{opp.amount}" filterMatchMode="contains">
									<h:outputText value="#{opp.amount}" />
								</p:column>
								<p:column
									headerText="#{ivy.cms.co('/Dialogs/listOpps/closeDate')}"
									width="100px;" sortBy="#{opp.closeDate}"
									filterBy="#{opp.closeDate}" filterMatchMode="contains">
									<h:outputText value="#{opp.closeDate}">
										<f:convertDateTime pattern="dd.MM.yyyy" />
									</h:outputText>
								</p:column>
								<p:column
									headerText="#{ivy.cms.co('/Dialogs/listOpps/stage')}"
									width="100px;" sortBy="#{opp.stage}"
									filterBy="#{opp.stage}" filterMatchMode="contains">
									<h:outputText value="#{opp.stage}" />
								</p:column>
								<p:column id="actionColumn" toggleable="false" headerText="#{ivy.cms.co('/Dialogs/listOpps/action')}" width="60px;" exportable="false" selectRow="false">
									<p:commandLink id="edit">
										<i class="fa fa-pencil" />
									</p:commandLink>
									<p:commandLink  id="delete"  styleClass="textDecorationNone">
										<i class="fa fa-trash margin4" />
									</p:commandLink>
								</p:column>
							</p:dataTable>
						</div>
					</div>
				</div>
				<br />
				<div class="command-btns">
					<p:commandButton id="proceed" actionListener="#{logic.close}"
						value="Close" update="form" icon="si si-close" />
				</div>
			</h:form>
			
			<p:dialog id="opportunityDetail" widgetVar="opportunityDetailDialog" header="Opportunity Detail"
				width="800" appendTo="@(body)" modal="true"
				dynamic="true" resizable="false" styleClass="position-absolute">
				<h:form id="opportunityDetailForm">
					<div class="ui-fluid">
						<h:panelGroup id="confirmDeleteDossierRelativesGroup">
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Opportunity Owner" for="oppOwnerView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="oppOwnerView" disabled="true" value="#{data.bean.selectedOpp.ownerId}"></p:inputText>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Amount" for="amountView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="amountView" disabled="true" value="#{data.bean.selectedOpp.amount}" ></p:inputText>
										</div>
									</div>
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Private" for="privateView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:selectBooleanCheckbox id="privateView" disabled="true" value="#{data.bean.selectedOpp.isPrivate}"></p:selectBooleanCheckbox>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Expected Revenue" for="RevenueView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="RevenueView" disabled="true" value="#{data.bean.selectedOpp.expectedRevenue}" ></p:inputText>
										</div>
									</div>
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Opportunity Name" for="oppNameView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="oppNameView" disabled="true" value="#{data.bean.selectedOpp.name}"></p:inputText>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Close Date" for="closeDateView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="closeDateView" disabled="true" value="#{data.bean.selectedOpp.closeDate}" >
											<f:convertDateTime pattern="dd.MM.yyyy" /></p:inputText>
										</div>
									</div>
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Account Name" for="accNameView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="accNameView" disabled="true" value="#{data.bean.accountName}"></p:inputText>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Type" for="typeView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="typeView" disabled="true" value="#{data.bean.selectedOpp.type}" ></p:inputText>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Stage" for="stageView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="stageView" disabled="true" value="#{data.bean.selectedOpp.stageName}" ></p:inputText>
										</div>
									</div>
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Lead Source" for="leadSourceView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="leadSourceView" disabled="true" value="#{data.bean.selectedOpp.leadSource}" ></p:inputText>
										</div>
									</div>
								</div>
								<div class="ui-g-12 ui-md-6 ui-lg-6">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-4 ui-lg-4">
											<p:outputLabel value="Probability (%)" for="probabilityView"></p:outputLabel>
										</div>
										<div class="ui-g-12 ui-md-8 ui-lg-8">
											<p:inputText id="probabilityView" disabled="true" value="#{data.bean.selectedOpp.probability}%" ></p:inputText>
										</div>
									</div>
								</div>
							</div>
							<div class="ui-g">
								<div class="ui-g-12 ui-md-12 ui-lg-12">
									<div class="ui-g">
										<div class="ui-g-12 ui-md-12 ui-lg-12">
											<p:outputLabel value="Description" for="descriptionView"></p:outputLabel>
										</div>
									</div>
									<div class="ui-g">										
										<div class="ui-g-12 ui-md-12 ui-lg-12">
											<p:inputTextarea id="descriptionView" disabled="true" value="#{data.bean.selectedOpp.description}"></p:inputTextarea>
										</div>
									</div>
								</div>
							</div>
							<h:panelGroup>
								<div class="ui-g">
									<div class="ui-g-12 ui-md-6 ui-lg-6" />
									<div class="ui-g-12 ui-md-3 ui-lg-3">
										
									</div>
									<div class="ui-g-12 ui-md-3 ui-lg-3">
										<p:commandButton id="ok"
											oncomplete="PF('opportunityDetailDialog').hide()"
											value="Close" icon="pi pi-time">
										</p:commandButton>
									</div>
								</div>
							</h:panelGroup>
						</h:panelGroup>
					</div>
				</h:form>
			</p:dialog>

			<style>
				.textDecorationNone {
					text-decoration: none !important;
				}
				.margin4 {
				   margin: 4px;	
				}
				.position-absolute {
					position: absolute;
				}
				.width100percent{
					width: 100%;
				}
				.right{
					float: right;
				}
			</style>
		</ui:define>
	</ui:composition>
</h:body>

</html>